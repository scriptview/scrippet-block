(()=>{"use strict";var e,t={870:()=>{const e=window.wp.blocks,t=window.React,n=window.wp.element,i=window.wp.blockEditor;function o(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e[i];n+=o.before.length,t.push({nature:o.nature,position:n,content:o.content})}return t}const r=!1;var a=" \f\n\r\t\v",l=new RegExp("[A-Za-z]"),s=["INT","EXT","EST","INT./EXT","INT/EXT","I/E"];function c(e,t){e.lineno++,r&&console.log(`# lineno=${e.lineno} line=${t}`);const n=function(e,t,n){var i,o=e.state,r=!1,a=e.nestedDepth?e.nestedDepth:0,l=-1,s=-1;0===o?(i=void 0,e.blocks=[],e.lineno=n):(i=e.blocks[e.blocks.length-1],s=0);for(let u=0;u<t.length;u++)if(r)r=!1;else{var c=t.charAt(u);if(0===o)l<0&&(l=u),"/"===c?o=1:"["===c&&(o=2);else if(1===o)"*"===c?(i={nature:"comment",before:t.substring(l,u-1),start:{lineno:n,column:u-1},content:[]},e.blocks.push(i),l=-1,s=u+1,o=100):o="["===c?2:0;else if(2===o)"["===c?(i={nature:"note",before:t.substring(l,u-1),start:{lineno:n,column:u-1},content:[]},e.blocks.push(i),l=-1,s=u+1,o=200):o="/"===c?1:0;else if(100===o)"*"===c?o=101:"/"==c&&(o=105);else if(101===o)if("/"===c)if(0===a){if(!i)throw new Error("internal error (1)");i.end={lineno:n,column:u},i.content.push(t.substring(s,u-1).trim()),o=0}else a--,o=100;else o=100;else if(105===o)"*"===c?a++:o=100;else if(200===o)"]"===c?o=201:"["===c&&(o=205);else if(201===o)if("]"===c){if(!i)throw new Error("internal error (2)");0===a?(i.end={lineno:n,column:u},i.content.push(t.substring(s,u-1).trim()),o=0):(a--,o=200)}else o=200;else 205===o&&("["===c?a++:o=200);r="\\"==c}if(1!=o&&2!=o||(o=0),0===o)0===e.blocks.length?(e.line=t,e.lastChunk=""):(e.line="",e.blocks.forEach((function(t,n,i){e.line+=t.before})),l>=0&&(e.lastChunk=t.substring(l),e.line+=e.lastChunk),e.line=e.line.trim()),e.nestedDepth=0;else{if(e.nestedDepth=a,o>=100&&o<200){if(o=100,!i)throw new Error("internal error (3)");i.content.push(t.substring(s).trim())}if(o>=200&&o<300){if(!i)throw new Error("internal error (4)");o=200,i.content.push(t.substring(s).trim())}}return e.state=o,o}(e.blockContext,t,e.lineno);if(r&&console.log(`# parseBlock state=${n}`),0===n){var i={line:t=e.blockContext.line,lineno:e.lineno,blocks:o(e.blockContext.blocks)};if(e.line0?e.line1=i:(e.line0=i,e.line1=void 0),e.line1){e.nextLineBlank=f(e.line1.line);for(var a=!1;!a;)a=h(e,e.line0.line,e.line0.blocks,e.line0.lineno);e.previousLineBlank=f(e.line0.line),e.line0=e.line1,e.line1=void 0}e.blockContext={state:0,nestedDepth:0,line:"",lineno:0,blocks:[],lastChunk:""}}}function u(e,t){for(var n=0;n<e.length;n++)e[n].position=e[n].position+t}function f(e){for(var t=0,n=0;n<e.length;n++){var i=e.charAt(n);if(a.indexOf(i)<0)return!1;t++}return t<2}function g(e,t){var n,i=0,o=0,r=0;for(i=0;i<e.length;i++)if(n=e.charAt(i),a.indexOf(n)<0){o=i;break}for(i=e.length-1;i>=0;i--)if(n=e.charAt(i),a.indexOf(n)<0){r=i;break}return u(t,-o),0===r?"":e.substring(o,r+1)}function h(e,t,n,i){var o,r=g(t,n),a=f(t);if(a&&n.length>0&&e.notif.block(n),0===e.state){if(a)return!0;if((o=t.indexOf(":"))<0)return e.state=10,!1;e.state=2,e.metaInformation={},p(e,t,o)}else if(2==e.state)if("\t"===t.charAt(0)||"   "===t.substring(0,3)){if(!e.currentKey)throw new Error("internal error");e.metaInformation[e.currentKey].push(t.trim())}else{if(!((o=t.indexOf(":"))>0))return e.notif.titlePage(e.metaInformation),e.state=10,!1;p(e,t,o)}else{if(10!=e.state)throw new Error("Invalid state:"+e.state);if(!a){var c=d(r,0,"><");c&&0===c.before.trim().length&&0===c.after.trim().length?(u(n,c.before.length+1),e.notif.action(g(c.between,n),n,{alignment:"centered"})):"="===r.charAt(0)&&r.length>=3&&"="===r.charAt(1)&&"="===r.charAt(2)?e.notif.pageBreak():"#"===r.charAt(0)&&function(e,t,n){var i=0,o=0;for(o=0;o<t.length;o++){var r=t.charAt(o);if("#"==r)i++;else if(" "!=r&&"\t"!=r)break}var a=t.substring(o).trim();return e.notif.section(a,i,n),!0}(e,r,i)||"="===r.charAt(0)&&function(e,t){var n=t.substring(1).trim();return e.notif.synopsis(n),!0}(e,r)||(e.previousLineBlank&&e.nextLineBlank||">"===t.charAt(0))&&function(e,t){var n=!1;return">"==t.charAt(0)?n=t.substring(1).trim():"TO:"===t.substring(t.length-3)&&t.toUpperCase()===t&&(n=t.trim()),!!n&&(e.notif.transition(n),!0)}(e,t)||e.previousLineBlank&&function(e,t,n){var i=!1;if("."===t.charAt(0)&&t.length>1&&"."!==t.charAt(1))i=t.substring(1).trim();else{var o=m(t,0," .");s.indexOf(o.toUpperCase())>=0&&(i=t.trim())}return!!i&&(e.notif.sceneHeading(i,n),!0)}(e,r,i)||e.previousLineBlank&&!e.nextLineBlank&&function(e,t){var n=!1;"^"===t.charAt(t.length-1)&&(n=!0,t=t.substring(0,t.length-1).trim());var i,o=!1;if("@"===t.charAt(0))o=t.substring(1).trim();else{var r=m(t,0,"(").trim();if(r.length>0&&r.toUpperCase()===r)for(var a=0;a<r.length;a++)if(i=r.charAt(a),l.test(i)){o=t;break}}if(o){var s,c=d(o,0,"()");return c&&(o=c.before.trim(),s=c.between.trim()),s?e.notif.character(o,{extension:s,isDualDialogue:n}):e.notif.character(o,{isDualDialogue:n}),!0}return!1}(e,r)||(!e.previousLineBlank&&function(e){return"character"===e.lastElementNature||"dialogue"===e.lastElementNature||"parenthetical"===e.lastElementNature}(e)?function(e,t){if("("===t.charAt(0)){var n=t.indexOf(")");if(n>0){e.notif.parenthetical(t.substring(1,n));var i=t.substring(n+1).trim();i.length>0&&e.notif.dialogue(i)}else e.notif.parenthetical(t.substring(1))}else e.notif.dialogue(t)}(e,r):e.notif.action(r,n,{}))}}return!0}function p(e,t,n){var i=t.substring(0,n).trim();if(e.currentKey=i,e.metaInformation[e.currentKey]=[],n<t.length){var o=t.substring(n+1).trim();o.length>0&&e.metaInformation[e.currentKey].push(o)}}function d(e,t,n){for(var i=0,o={before:"",between:"",after:""},r=t;r<e.length;r++){var a=e.charAt(r);if(0===i&&a===n[0])o.before=e.substring(t,r),i=1;else{if(1===i&&a===n[1]){o.after=e.substring(r+1),i=3;break}1===i&&(o.between=o.between+a)}}return 3===i&&o}function m(e,t,n){for(var i=t;i<e.length;i++){var o=e.charAt(i);if(n.indexOf(o)>=0)return e.substring(t,i)}return e.substring(t)}function b(e,t){var n=function(e){return{state:0,lineno:0,blockContext:{state:0,nestedDepth:0,line:"",lineno:0,blocks:[],lastChunk:""},metaInformation:{},previousLineBlank:!0,nextLineBlank:void 0,notif:e||{startOfDocument:function(){console.log("startOfDocument")},titlePage:function(e){console.log("titlePage:",e)},sceneHeading:function(e,t){console.log("sceneHeading:<"+e+">",t)},action:function(e,t,n){console.log("action:<"+e+"> options:",n)},pageBreak:function(){console.log("pageBreak")},dualDialogueStart:function(){console.log("dualDialogueStart")},dualDialogueEnd:function(){console.log("dualDialogueEnd")},dialogueStart:function(){console.log("dialogueStart")},dialogueEnd:function(){console.log("dialogueEnd")},character:function(e,t){t.extension?console.log("character:<"+e+"> option:",t):console.log("character:<"+e+">")},parenthetical:function(e){console.log("parenthetical:<"+e+">")},dialogue:function(e){console.log("dialogue:<"+e+">")},transition:function(e){console.log("transition:<"+e+">")},section:function(e,t,n){console.log("section:"+t+"<"+e+">",n)},synopsis:function(e){console.log("synopsis:<"+e+">")},block:function(e){console.log("block:<"+e+">")},endOfDocument:function(){console.log("endOfDocument")}}}}();n.notif=function(e,t,n){var i=!1,o=[];function r(){o.length>0&&(t.dialogueStart(),o.forEach((function(e){e()})),t.dialogueEnd()),o.length=0}function a(){r(),i&&(t.dualDialogueEnd(),i=!1)}return{startOfDocument:function(){t.startOfDocument(),e.lastElementNature="startOfDocument"},titlePage:function(n){t.titlePage(n),e.lastElementNature="titlePage"},sceneHeading:function(n,i){a(),t.sceneHeading(n,i),e.lastElementNature="sceneHeading"},action:function(n,i,o){a(),t.action(n,i,o),e.lastElementNature="action"},pageBreak:function(){a(),t.pageBreak(),e.lastElementNature="pageBreak"},character:function(n,a){o.length>0&&(a.isDualDialogue&&!i?(t.dualDialogueStart(),i=!0,r()):(r(),i&&(t.dualDialogueEnd(),i=!1))),o.push((function(){t.character(n,a)})),e.lastElementNature="character"},parenthetical:function(n){o.push((function(){t.parenthetical(n)})),e.lastElementNature="parenthetical"},dialogue:function(n){o.push((function(){t.dialogue(n)})),e.lastElementNature="dialogue"},transition:function(n){a(),t.transition(n),e.lastElementNature="transition"},section:function(n,i,o){a(),t.section(n,i,o),e.lastElementNature="section"},synopsis:function(n){t.synopsis(n),e.lastElementNature="synopsis"},block:function(e){t.block(e)},dialogueStart:function(){t.dialogueStart(),e.lastElementNature="dialogueStart"},dialogueEnd:function(){t.dialogueEnd(),e.lastElementNature="dialogueEnd"},dualDialogueStart:function(){t.dualDialogueStart(),e.lastElementNature="dualDialogueStart"},dualDialogueEnd:function(){t.dualDialogueEnd(),e.lastElementNature="dualDialogueEnd"},endOfDocument:function(){a(),t.endOfDocument(),e.lastElementNature="endOfDocument"}}}(n,t);const i=e.split(/\r?\n/);n.notif.startOfDocument();for(const e of i)c(n,e);c(n,""),2===n.state&&n.notif.titlePage(n.metaInformation),n.notif.endOfDocument()}function v(e){const n=function(){const e=[],n=[];function i(t){e.push(t)}function o(t,n){e.push(`${t}||${n}`)}function r(t,n){e.push(`${t}||${JSON.stringify(n)}`)}const a={startOfDocument:function(){i("startOfDocument")},titlePage:function(e){r("titlePage",e)},sceneHeading:function(i,o){var r,a;r=i,a=o,e.push(`sceneHeading||${r}||${a}`),n.push((0,t.createElement)("p",{className:"sceneheader"},i))},action:function(i,o,r){var a,l,s;a=i,l=o,s=r,e.push(`action||${a}||${JSON.stringify(l)}||${JSON.stringify(s)}`),n.push((0,t.createElement)("p",{className:"action"},i))},pageBreak:function(){i("pageBreak")},dualDialogueStart:function(){i("dualDialogueStart")},dualDialogueEnd:function(){i("dualDialogueEnd")},dialogueStart:function(){i("dialogueStart")},dialogueEnd:function(){i("dialogueEnd")},character:function(i,o){var r,a;r=i,a=o,e.push(`character||${r}||${JSON.stringify(a)}`),n.push((0,t.createElement)("p",{className:"character"},i))},parenthetical:function(e){o("parenthetical",e),n.push((0,t.createElement)("p",{className:"parenthetical"},`(${e})`))},dialogue:function(e){o("dialogue",e),n.push((0,t.createElement)("p",{className:"dialogue"},e))},transition:function(e){o("transition",e),n.push((0,t.createElement)("p",{className:"transition"},e))},section:function(t,n,i){!function(t,n,i,o){e.push(`section||${n}||${i}||${JSON.stringify(o)}`)}(0,t,n,i)},synopsis:function(e){o("synopsis",e)},block:function(e){r("block",e)},endOfDocument:function(){i("endOfDocument")}};return{getNotification:()=>a,getResult:e=>(0,t.createElement)("div",{className:"scrippet-fountain-html"},n)}}();b(e,n.getNotification());const i=n.getResult(e);return e.replace(/\b\w{6,}\b/g,"<strong>$&</strong>"),i}const k=JSON.parse('{"UU":"scriptview/scrippet-block"}');(0,e.registerBlockType)(k.UU,{edit:function({attributes:e,setAttributes:o,isSelected:r}){const{fountainSource:a=""}=e,l=(0,i.useBlockProps)();return(0,n.useEffect)((function(){const e=v(a);o({fountainHtml:e})}),[]),(0,t.createElement)("div",{...l},r&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("pre",{className:"mermaid-editor wp-block-code"},(0,t.createElement)(i.PlainText,{onChange:function(e){o({fountainSource:e})},value:a})),(0,t.createElement)("hr",null)),v(a))},save:function(e){const{fountainSource:n}=e.attributes,o=i.useBlockProps.save({className:"scrippet-block"});return(0,t.createElement)("div",{...o},(0,t.createElement)("pre",{className:"scrippet-fountain-source",style:{display:"none"}},n),v(n))}})}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,n,o,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,r]=e[u],l=!0,s=0;s<n.length;s++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(l=!1,r<a&&(a=r));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[a,l,s]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(s)var u=s(i)}for(t&&t(n);c<a.length;c++)r=a[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=globalThis.webpackChunkscrippet_block=globalThis.webpackChunkscrippet_block||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[350],(()=>i(870)));o=i.O(o)})();